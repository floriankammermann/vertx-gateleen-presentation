<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif';font-size: 2em; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code { font-size: 20px; }, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-slide-content { font-size: 35px; }
      .remark-slide-content-small { font-size: 25px; }
      .p-margin-small p { margin-bottom: 0.6em; margin-top: 0.6em; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# vert.x & gateleen

---

# Agenda

1. What is vert.x
2. Hands on
3. Under the hood
4. vert.x and microservices
5. gateleen

---

# Introduction

* Florian Kammermann working at Post IT
* Mostly doing DevOps stuff and gateleen in the moment
* We (Post IT) opensourced gateleen in march 2016

---
class: center, middle

# vert.x

## Think of it as a Swiss Army Knife <br> for building modern, scalable, apps

---
class: p-margin-small

Runs on the JVM 
 
Polyglot, application components can be written in Java, JavaScript, Groovy, Ruby, Ceylon 

Event Driven, communication over distributed event bus  

Simple concurrency model, all code is single threaded  

Simple, asynchronous programming model  

---
class: remark-slide-content-small

# Hello World Java (compile on the fly)

Download https://bintray.com/artifact/download/vertx/downloads/vert.x-3.2.1.zip and put it on the `PATH`

`git clone https://github.com/floriankammermann/vertx-examples.git`

`cd vertx-examples/hello-world-java/src/main/java`

`vertx run org/swisspush/vertx/examples/HelloJugsBern.java`

---

# Hello World Java (fatJar)

* Download https://services.gradle.org/distributions/gradle-2.14-bin.zip and put it on the `PATH`
* `git clone https://github.com/floriankammermann/vertx-examples.git`
* `cd vertx-examples/hello-world-java/`
* `gradle shadowJar`
* `java -jar build/libs/hello-world-0.0.1-SNAPSHOT-all.jar`

---

# Verticles

* Verticles are isolated with seperate class loaders
* A verticle never gets executed by more than one thread concurrently
* No race conditions, no deadlocks. You write your code single threaded

---

# Chat example simple

* Single startup, no cluster
* Test with 2 chromium windows
* Test with another firefox window
 
---

# Chat example shell

* Login to shell http://localhost:8989/shell.html
* bus-tail chat.to.server
* bus-tail chat.to.client
* bus-send chat.to.server hey mister server
* bus-send chat.to.client hey mister client

---

# Chat example clustered

* java -jar build/libs/chat-0.0.1-SNAPSHOT-all.jar -cluster
* java -jar -DshellPort=8999 -DhttpPort=8181 -jar build/libs/chat-0.0.1-SNSHOT-all.jar -cluster
* issue chat message
* change in client from publish to send
 
---

# SockJS 

* http://sockjs.org/
* Browser JavaScript library that provides a WebSocket-like object
* Coherent, cross-browser, Javascript API
* Low latency, full duplex, cross-domain communication channel between

---

# SockJS

SockJSHandler for using SockJS in vert.x-web applications

```java
Router router = Router.router(vertx);

SockJSHandlerOptions options = 
	new SockJSHandlerOptions()
		.setHeartbeatInterval(2000);

SockJSHandler sockJSHandler = 
	SockJSHandler.create(vertx, options);

router.route("/myapp/*").handler(sockJSHandler);
```

---

# vert.x web

* Routing based on method, path, etc
* Extraction of parameters from paths
* Request body handling
* Basic Auth
* Authorisation Handler
* Static file serving
* SockJS support
* Event-bus bridge

    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
